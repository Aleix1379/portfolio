import{j as t}from"./jsx-runtime.CRkqtJS5.js";import{r as j}from"./index.B52nOzfP.js";import{I as f}from"./IconLink.ChUIfQZS.js";import{f as l,g as x,s as h}from"./index.95d291e9.F6gnNl7m.js";const N=({testID:i="",label:a,value:e,placeholder:r,onChange:d,type:s="text",className:c,validation:m})=>{const[u,g]=j.useState(!1),E=n=>(u||(n=n*-1),n*.05+"s"),o=()=>!(m?.touched&&m.message.length>0);return t.jsxs("label",{className:`${l.container} ${c}`,children:[t.jsx("div",{className:l.label,children:a.split("").map((n,b)=>t.jsx("span",{className:`${l.letter} ${u?l.animated:""}`,style:{animationDelay:E(b),color:o()?"#38c188":"#c0392b"},children:n},b))}),s!=="textarea"&&t.jsxs("div",{children:[t.jsx("div",{className:`${l.inputWrapper}  ${u?l.borderWrapper:""}`,style:{borderColor:o()?"#38c188":"#c0392b"},children:t.jsx("input",{"data-testid":i,className:l.input,type:s,placeholder:u?r:"",value:e,onChange:n=>d(n.target.value),onFocus:()=>g(!0),onBlur:()=>g(e.length>0)})}),m?.touched&&m.message.length>0&&t.jsx("div",{className:l.error,children:m.message})]}),s==="textarea"&&t.jsxs("div",{children:[t.jsx("div",{className:`${l.textareaWrapper} ${u?l.borderWrapper:""}`,style:{borderColor:o()?"#38c188":"#c0392b"},children:t.jsx("textarea",{className:`${l.input} ${l.textarea}`,placeholder:u?r:"",value:e,onChange:n=>d(n.target.value),onFocus:()=>g(!0),onBlur:()=>g(e.length>0)})}),m?.touched&&m.message.length>0&&t.jsx("div",{className:l.error,children:m.message})]})]})},y=({label:i,onClick:a,className:e,disabled:r=!1})=>t.jsxs("button",{className:`${x.button} ${r?x.buttonDisabled:x.buttonActive} ${e}`,onClick:a,disabled:r,children:[t.jsx("span",{children:i}),t.jsx("div",{className:x.background})]}),S="EMAIL",$="REQUIRED",k="MIN_LENGTH",A="MAX_LENGTH",I="PASSWORD_COMPLEXITY",R="PASSWORD_REPEAT";class L{errors;setErrors;constructor(a,e){this.errors=a,this.setErrors=e}validateForm(a){const e={...this.errors},r={};for(const s in this.errors)e[s].constraints.forEach(async c=>{r[s]||(r[s]=0),c.key===$&&a[s]?.length===0?this.setError(r,s,e,`Please enter your ${e[s].label}`):c.key===k&&a[s]?.length<c.value?this.setError(r,s,e,`${e[s].label} should be at least ${c.value} characters`):c.key===A&&a[s]?.length>c.value?this.setError(r,s,e,`${e[s].label} cannot be longer than ${c.value} characters`):c.key===S&&!/\S+@\S+\.\S+/.test(a[s])?this.setError(r,s,e,`Please enter your email address in format:
yourname@example.com`):c.key===I&&!this.isPasswordStrong(a[s])?this.setError(r,s,e,`${e[s].label} is not strong`):c.key===R&&a[c.fields[0]]!==a[c.fields[1]]&&this.setError(r,s,e,"The passwords do not match"),r[s]===0&&!e[s].message.includes("already exists")&&(e[s].message="")});return this.setErrors(e),Object.values(r).reduce((s,c)=>s+c)===0}isPasswordStrong(a){let e=0;return e+=/[A-Z]+/.test(a)?1:0,e+=/[a-z]+/.test(a)?1:0,e+=/[0-9]+/.test(a)?1:0,e+=/[\W]+/.test(a)?1:0,e>=3}setError(a,e,r,d){a[e]++,r[e].message=d}}const C={subject:"",message:""},T=()=>{const[i,a]=j.useState(C),[e,r]=j.useState(!1),d=()=>({subject:{message:"Subject",touched:!1,label:"",constraints:[{key:"REQUIRED"},{key:"MAX_LENGTH",value:60}]},message:{message:"",touched:!1,label:"Message",constraints:[{key:"REQUIRED"},{key:"MAX_LENGTH",value:500}]}}),[s,c]=j.useState(d),m=new L(s,c),u=(o,n)=>{const b={...i,[o]:n};a(b),m.validateForm(b);const p={...s};p[o]&&(p[o].touched=!0),c({...s,...p}),r(s.subject.message.length===0&&s.message.message.length===0)},g=o=>{o&&(o.preventDefault(),E())},E=()=>{window.open(`mailto:aleixmp1379@gmail.com?subject=${i.subject}&body=${i.message}`,"_blank")};return t.jsxs("section",{id:"contact",className:h.section,children:[t.jsx("h2",{className:h.formTitle,children:"Contact me"}),t.jsxs("div",{className:h.infoContact,children:[t.jsx("img",{src:"/images/contact.svg",alt:"Contact",className:h.imageContact,width:500,height:620}),t.jsxs("div",{children:[t.jsxs("div",{className:h.socialNetworks,children:[t.jsx(f,{link:{url:"https://www.linkedin.com/in/aleixmp/",text:"Linkedin",icon:"linkedin"},size:50,color:"#909090"}),t.jsx(f,{link:{url:"https://github.com/Aleix1379",text:"Github",icon:"github"},size:50,color:"#909090"})]}),t.jsxs("form",{"data-testid":"contact-form",className:h.form,onSubmit:g,children:[t.jsx(N,{testID:"contact-form-subject",className:h.input,label:"Subject",value:i.subject,onChange:o=>u("subject",o)}),t.jsx(N,{"data-testid":"contact-form-message",className:h.input,label:"Message",value:i.message,onChange:o=>u("message",o),type:"textarea"}),t.jsx(y,{className:h.button,label:"Send!",onClick:g,disabled:!e})]})]})]})]})};export{T as default};
